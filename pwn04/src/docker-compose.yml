name: pwn04
services:
  git:
    build:
      context: .
      args:
        ADMIN_PASSWORD: ${ADMIN_PASSWORD}
        FLAG: ${FLAG}
    container_name: pwn04-git
    ports:
      - "2222:22"
    volumes:
      - git_home:/home
    restart: unless-stopped

  service:
    build: ./service
    container_name: pwn04-service
    ports:
      - "127.0.0.1:8003:8080"
    environment:
      - GIT_HOST=git
      - ADMIN_PASSWORD=${ADMIN_PASSWORD}
      - TURNSTILE_SITE_KEY=${TURNSTILE_SITE_KEY}
      - TURNSTILE_SECRET_KEY=${TURNSTILE_SECRET_KEY}
    depends_on:
      - git
    restart: unless-stopped

volumes:
  git_home:
